---
import MainLayout from "@/layouts/MainLayout.astro";
import { siteConfig } from "@/data/site";
---

<MainLayout title="Home">
  <section class="hero-section fade-in">
    <div class="hero-wrapper">
      <div class="hero-content">
        <h1>A Record of an Intellectual Journey</h1>
        <p class="hero-text">
          This is a digital archive of my academic research, personal projects,
          and musings.
        </p>
        <div class="hero-actions">
          <a href="/research-portfolio/paper-reviews" class="btn"
            >View Research</a
          >
          <a
            href="/research-portfolio/about"
            class="btn"
            style="margin-left: 1rem; border-color: var(--color-text-secondary); color: var(--color-text-secondary);"
            >About Me</a
          >
        </div>
      </div>
      <div class="hero-image">
        <img
          src="/research-portfolio/images/profile-yellu.jpg"
          alt="Yellu"
          class="profile-img"
        />
      </div>
    </div>

    <div class="scroll-indicator" id="scroll-indicator">
      <span class="mouse">
        <span class="wheel"></span>
      </span>
      <span class="arrow"></span>
    </div>
  </section>

  <section
    id="featured-work"
    class="featured-section fade-in"
    style="opacity: 0;"
  >
    <h2>Featured Work</h2>
    <div class="featured-grid">
      <!-- Placeholder for featured items, will be populated dynamically later -->
      <div class="card">
        <h3>Research Focus</h3>
        <p>
          Exploring the intersection of High-Performance Computing and Machine
          Learning Compilers.
        </p>
        <a href="/research-portfolio/about">Read more &rarr;</a>
      </div>
      <div class="card">
        <h3>Latest Review</h3>
        <p>Check out my latest analysis on efficient LLM execution engines.</p>
        <a href="/research-portfolio/paper-reviews">Browse Reviews &rarr;</a>
      </div>
    </div>
  </section>
</MainLayout>

<script>
  // Scroll functionality
  const scrollIndicator = document.getElementById("scroll-indicator");
  const featuredSection = document.getElementById("featured-work");

  if (scrollIndicator && featuredSection) {
    scrollIndicator.addEventListener("click", () => {
      featuredSection.scrollIntoView({ behavior: "smooth" });
    });
  }

  // Intersection Observer for fade-in on scroll
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          (entry.target as HTMLElement).style.opacity = "1";
          (entry.target as HTMLElement).style.animation =
            "fadeIn 0.6s ease-out forwards";
        }
      });
    },
    { threshold: 0.1 },
  );

  if (featuredSection) {
    observer.observe(featuredSection);
  }
</script>

<style>
  .hero-section {
    min-height: calc(100vh - var(--header-height));
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start; /* Left align */
    text-align: left; /* Left align */
    position: relative;
    padding: 0;
    margin-top: -2rem; Counteract MainLayout padding
  }

  .hero-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    gap: 4rem;
    max-width: var(--max-width);
    margin-bottom: 4rem;
    /* margin-bottom removed for true centering */
  }

  .hero-content {
    flex: 1;
    max-width: 600px;
  }

  .hero-image {
    flex-shrink: 0;
  }

  .profile-img {
    width: 250px;
    height: 300px; /* Slightly taller for portrait */
    object-fit: cover;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--color-border);
    transition: transform 0.3s ease;
  }

  .profile-img:hover {
    transform: scale(1.02);
  }

  .hero-text {
    font-size: 1.25rem;
    color: var(--color-text-secondary);
    margin-bottom: 2.5rem;
    max-width: 600px;
    margin-left: 0; /* Align left */
    margin-right: 0;
  }

  .featured-section {
    padding: 6rem 0;
    border-top: 1px solid var(--color-bg-tertiary);
    min-height: 100vh; /* Make it take full screen too for effect */
  }

  .featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }

  /* Scroll Indicator Styles */
  .scroll-indicator {
    position: absolute;
    bottom: 4rem; /* Increased from 2rem */
    left: 50%;
    transform: translateX(-50%);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    opacity: 0.7;
    transition: opacity 0.3s;
  }

  .scroll-indicator:hover {
    opacity: 1;
  }

  .mouse {
    width: 26px;
    height: 40px;
    border: 2px solid var(--color-text-secondary);
    border-radius: 20px;
    position: relative;
  }

  .wheel {
    width: 4px;
    height: 8px;
    background-color: var(--color-text-secondary);
    border-radius: 2px;
    position: absolute;
    top: 6px;
    left: 50%;
    transform: translateX(-50%);
    animation: scroll 1.5s infinite;
  }

  .arrow {
    width: 10px;
    height: 10px;
    border-right: 2px solid var(--color-text-secondary);
    border-bottom: 2px solid var(--color-text-secondary);
    transform: rotate(45deg);
    animation: bounce 2s infinite;
  }

  @keyframes scroll {
    0% {
      opacity: 1;
      top: 6px;
    }
    100% {
      opacity: 0;
      top: 20px;
    }
  }

  @keyframes bounce {
    0%,
    20%,
    50%,
    80%,
    100% {
      transform: translateY(0) rotate(45deg);
    }
    40% {
      transform: translateY(-5px) rotate(45deg);
    }
    60% {
      transform: translateY(-3px) rotate(45deg);
    }
  }

  @media (max-width: 768px) {
    .featured-grid {
      display: flex;
      flex-direction: column;
    }

    .hero-section {
      padding-top: 0; /* Centered by flexbox */
      min-height: 85vh; /* Fallback for mobile where header height is auto */
      align-items: flex-start; /* Left align on mobile */
      text-align: left; /* Left align text on mobile */
    }

    .hero-wrapper {
      flex-direction: column-reverse; /* Text on top, image below? Or column for Image top? Usually Column: Image -> Text or Text -> Image. Let's do Text Top for now as requested by designs usually, or simple column. Actually column-reverse puts HTML order (Text, Img) -> Img, Text. Let's stick to column --> Text, Image */
      /* Actually typical user profile: Image Top? */
      /* Given current HTML: Content (Text), Image. */
      /* column: Content, Image. column-reverse: Image, Content. */
      flex-direction: column-reverse;
      gap: 2rem;
      margin-bottom: 4rem;
      align-items: flex-start;
    }

    .hero-content {
      /* padding: 0 1.5rem; Removed double padding */
      margin-left: 0;
      margin-right: 0;
      width: 100%; /* Ensure full width for left alignment */
      box-sizing: border-box;
    }

    .profile-img {
      width: 150px;
      height: 180px;
    }

    .hero-text {
      margin-left: 0;
      margin-right: 0;
    }

    .hero-actions {
      display: flex;
      justify-content: flex-start; /* Align buttons to start */
    }

    h1 {
      font-size: 2rem;
    }
  }
</style>
